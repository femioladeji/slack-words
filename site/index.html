<!DOCTYPE html>
<html lang="en">

<head>

  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta name="description" content="">
  <meta name="author" content="">

  <title>WORDSGAME</title>

  <!-- Font Awesome Icons -->
  <link href="vendor/fontawesome-free/css/all.min.css" rel="stylesheet" type="text/css">

  <!-- Google Fonts -->
  <link href="https://fonts.googleapis.com/css?family=Merriweather+Sans:400,700" rel="stylesheet">
  <link href='https://fonts.googleapis.com/css?family=Merriweather:400,300,300italic,400italic,700,700italic' rel='stylesheet' type='text/css'>

  <!-- Plugin CSS -->
  <link href="vendor/magnific-popup/magnific-popup.css" rel="stylesheet">

  <!-- Theme CSS - Includes Bootstrap -->
  <link href="css/creative.min.css" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css?family=Cookie" rel="stylesheet">
</head>

<body id="page-top">

  <!-- Navigation -->
  <nav class="navbar navbar-expand-lg navbar-light fixed-top py-3" id="mainNav">
    <div class="container">
      <a class="navbar-brand js-scroll-trigger" href="#page-top">Wordsgame</a>
      <button class="navbar-toggler navbar-toggler-right" type="button" data-toggle="collapse" data-target="#navbarResponsive" aria-controls="navbarResponsive" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
      </button>
      <div class="collapse navbar-collapse" id="navbarResponsive">
        <ul class="navbar-nav ml-auto my-2 my-lg-0">
          <li class="nav-item">
            <a class="nav-link js-scroll-trigger" href="#about">How to play</a>
          </li>
          <li class="nav-item">
            <a class="nav-link js-scroll-trigger" href="#contact">Contact</a>
          </li>
        </ul>
      </div>
    </div>
  </nav>

  <!-- modal -->
  <div class="modal myModal" tabindex="-1" role="dialog">
      <div class="modal-dialog modal-dialog-centered" role="document">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title">Wordsgame</h5>
            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
              <span aria-hidden="true">&times;</span>
            </button>
          </div>
          <div class="modal-body">
            <p></p>
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
          </div>
        </div>
      </div>
    </div>

  <!-- Masthead -->
  <header class="masthead">
    <div class="container h-100">
      <div class="row h-100 align-items-center justify-content-center text-center">
        <div class="col-lg-10 align-self-end">
          <h1 class="text-uppercase text-white font-weight-bold">WORDSGAME</h1>
          <hr class="divider my-4">
        </div>
        <div class="col-lg-8 align-self-baseline">
          <p class="text-white-75 font-weight-light mb-5">A Slack game to test your mastery of English and how good you are at forming words from random letters</p>
          <a href="#" class="add-to-slack"><img alt="Add to Slack" height="40" width="139" src="https://platform.slack-edge.com/img/add_to_slack.png" srcset="https://platform.slack-edge.com/img/add_to_slack.png 1x, https://platform.slack-edge.com/img/add_to_slack@2x.png 2x"></a>
        </div>
      </div>
    </div>
  </header>

  <!-- About Section -->
  <section class="page-section bg-primary" id="about">
    <div class="container">
      <div class="row justify-content-center">
        <div class="col-lg-8 text-center">
          <h2 class="text-white mt-0">What is wordsgame</h2>
          <hr class="divider light my-4">
          <p class="text-white-50 mb-4">Do you want to engage in a game of wits with your colleagues at work then this is the game for you. Random letters are sent to the channel and everybody replies in a thread with valid english words for 60 seconds. The result is displayed along with all the words each user entered. If a word has been used by another user or it's an invalid word, it doesn't get scored</p>
          <p class="text-white-50 mb-4">The game can only be played in a public channel</p>
        </div>
      </div>
    </div>
  </section>

  <!-- Services Section -->
  <section class="page-section" id="services">
    <div class="container">
      <h2 class="text-center mt-0">How It Works</h2>
      <hr class="divider my-4">
      <div class="row">
        <div class="col-lg-4 col-md-6 text-center">
          <div class="mt-5">
            <i class="fas fa-4x fa-play-circle text-primary mb-4"></i>
            <h3 class="h4 mb-2">/wordsgame</h3>
            <p class="text-muted mb-0">Use the slash command to start a game. Random letters are posted on the channel</p>
          </div>
        </div>
        <div class="col-lg-4 col-md-6 text-center">
          <div class="mt-5">
            <i class="fas fa-4x fa-i-cursor text-primary mb-4"></i>
            <h3 class="h4 mb-2">Type words</h3>
            <p class="text-muted mb-0">Everybody types as many valid words as they can in the message thread using the letters within 60 seconds</p>
          </div>
        </div>
        <div class="col-lg-4 col-md-6 text-center">
          <div class="mt-5">
            <i class="fas fa-4x fa-stop-circle text-primary mb-4"></i>
            <h3 class="h4 mb-2">Game ends</h3>
            <p class="text-muted mb-0">Result is posted on the Slack channel</p>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Demo Section -->
  <section id="demo">
    <div class="container-fluid">
        <iframe width="1000" height="625" src="https://www.youtube.com/embed/TE7YNIaI5pY" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
    </div>
  </section>

  <!-- Contact Section -->
  <section class="page-section" id="contact">
    <div class="container">
      <div class="row justify-content-center">
        <div class="col-lg-8 text-center">
          <h2 class="mt-0">Let's Get In Touch!</h2>
          <hr class="divider my-4">
          <p class="text-muted mb-5">Wordsgame is fully open source. If you have encounter any problem using the app please create an <a href="https://github.com/femioladeji/slack-words/issues">issue</a> on github or send a mail</p>
        </div>
      </div>
      <div class="row">
        <div class="col-lg-4 ml-auto text-center mb-5 mb-lg-0">
          <i class="fab fa-github fa-3x mb-3 text-muted"></i>
          <div>
              <a target="_blank" class="d-block" href="https://github.com/femioladeji/slack-words">Github</a>
          </div>
        </div>
        <div class="col-lg-4 mr-auto text-center">
          <i class="fas fa-envelope fa-3x mb-3 text-muted"></i>
          <a class="d-block" href="mailto:femidotexe@gmail.com">femidotexe@gmail.com</a>
        </div>
        <div class="col-lg-4 mr-auto text-center">
          <a class="bmc-button" target="_blank" href="https://www.buymeacoffee.com/amkx0Lh"><img src="https://cdn.buymeacoffee.com/buttons/bmc-new-btn-logo.svg" alt="Buy me a coffee"><span style="margin-left:15px;font-size:28px !important;">Buy me a coffee</span></a>
        </div>
      </div>
    </div>
  </section>
  <!-- Footer -->
  <footer class="bg-light py-5">
    <div class="container">
      <div class="small text-center text-muted">
        Copyright &copy; 2019
        &nbsp;&nbsp;&nbsp;<a href="privacy.html">Privacy Policy</a>
      </div>
    </div>
  </footer>

  <!-- Bootstrap core JavaScript -->
  <script src="vendor/jquery/jquery.min.js"></script>
  <script src="vendor/bootstrap/js/bootstrap.bundle.min.js"></script>

  <!-- Plugin JavaScript -->
  <script src="vendor/jquery-easing/jquery.easing.min.js"></script>
  <script src="vendor/magnific-popup/jquery.magnific-popup.min.js"></script>

  <!-- Custom scripts for this template -->
  <script src="js/creative.min.js"></script>

  <script>
    function randomNumber(maxNum) {
      return Math.floor(Math.random() * maxNum);
    }
    function generateStateCode() {
      const letters = 'abcdefghijklmnopqrstuvwxyz';
      let randomCode = '';
      for (let i = 0; i < 10; i += 1) {
        randomCode += `${letters[randomNumber(letters.length)]}`;
      }
      return randomCode;
    }
    function authorizeOnSlack() {
      const stateCode = generateStateCode();
      localStorage.setItem('state', stateCode);
      const url = `https://slack.com/oauth/authorize?client_id=198697306055.702655185381&scope=commands,channels:history,users:read&state=${stateCode}`;
      window.location.href = url;
    }

    document.querySelector('.add-to-slack').addEventListener('click', () => {
      authorizeOnSlack();
    });

    const url = window.location.href.split(/\?|\&/);
    if (url[1] && url[1].includes('code')) {
      const code = url[1].split('=')[1];
      const state = url[2].split('=')[1];
      if (state !== localStorage.getItem('state')) {
        $('.modal-body p').text('Something went wrong, Please report this error via the links in the contact section');
        $('.myModal').modal('show');
      } else {
        const slackUrl = 'https://eyjw6r0pik.execute-api.us-east-1.amazonaws.com/prod/slack-auth';
        window.fetch(slackUrl, {
            method: 'post',
            headers: {
                'Accept': 'application/json',
                'Content-Type': 'application/json'
            },
            body: JSON.stringify({
                code
            })
        }).then(res => {
            res.json().then(a => {
              $('.modal-body p').text('You\'ve successfully added Wordsgame to your Slack team. Welcome onboard ðŸ™Œ');
              $('.myModal').modal('show');
            })
        }).catch(() => {
          $('.modal-body p').text('An error occurred while adding the Slack app. Please report this error via the links in the contact section');
          $('.myModal').modal('show');
        })
      }
    }
  </script>

</body>

</html>
